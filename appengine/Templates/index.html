<!DOCTYPE html>
<html lang="es">
<html>
	<head>
		<title>Greenhouse Monitoring | LiSANDRA WSN</title><!--Titulo de mi web-->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1,maxium-scale=1,minum-scale=1">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/estilos.css">
	<link rel="stylesheet" href="css/fontello.css">
	<link rel="stylesheet" type="text/css" href="css/main.css"/>	
	<link rel="stylesheet" type="text/css" href="js/amcharts/plugins/export/export.css" media="all"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.css">	
	</head>
	
	<body>
       <!--Menu Header-->
       <div class="container">
           <header>
                <nav class="navbar navbar-default">
                    <div class="container-fluid">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-1">
                                <span class="sr-only">Menu</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <a href="index.html" class="navbar-brand">LiSANDRA</a>
                        </div>
                        <div class="collapse navbar-collapse" id="navbar-1">
                            <ul class="nav navbar-nav navbar-right">
                                <li><a href="configuracion.html">Configuración <span class="glyphicon glyphicon-cog"></span></a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
           </header>
        </div>
        <!--Datos generales donde se muestra la media de todos los sensores-->
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h2 class="center-block" style="width:220px;">Maximos diarios</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-4">
                   <div style="position:relative;">
                        <span class="icon-sun center-block iconglobal" style="color:#f1c40f"></span>
                        <p class="centrar datoglobal">1700 lx</p>
                   </div>
                    
                </div>
                <div class="col-sm-12 col-md-4">
                    <span class="icon-temperatire center-block iconglobal" style="color:#e74c3c;"></span>
                    <p class="centrar datoglobal">36°C</p>
                </div>
                <div class="col-sm-12 col-md-4">
                    <span class="icon-water center-block iconglobal" style="color:#3498db;"></span>
                    <p class="centrar datoglobal">85%</p>
                </div>
            </div>
            <br>
        </div>
        <!--Muestra de graficos por sensor-->
        <main style="background:#ecf0f1">
            
        <div class="container">
            <div class="row">
                 <div class="col-xs-12">
                    <h2 class="center-block" style="width:350px;">Opciones de graficación:</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-12">
                    <div class="btn-group btn-group-justified">
                        <div class="btn-group">
                            <button class="btn btn-default menu-button active" id="year">Año</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-default menu-button" id="season">Estaciones</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-default menu-button" id="month">Mes</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-default menu-button" id="day">Día</button>
                        </div>
                    </div>
                    <br>
                    <div class="year-selection show">
                        <div style="text-align:center;" class="col-xs-12">
                            <div class="btn-group">
                                <button type="button" id="drop-year" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Seleccione el año <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="year" value="2016"><a>2016</a></li>
                                    <li class="year" value="2017"><a>2017</a></li>
                                    <li class="year" value="2018"><a>2018</a></li>
                                    <li class="year" value="2019"><a>2019</a></li>
                                    <li class="year" value="2020"><a>2020</a></li>
                                    <li class="year" value="2021"><a>2021</a></li>
                                </ul>
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="season-selection hide">
                        <div class="col-xs-12">
                            <br>
                            <ul class="season-btn">
                                <li class="primavera-btn">Primavera <span class="icon-sun-1"></span></li>
                                <li class="verano-btn">Verano <span class="icon-emo-sunglasses"></span></li>
                                <li class="otono-btn">Otoño <span class="icon-leaf"></span></li>
                                <li class="invierno-btn">Invierno <span class="icon-snow"></span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="month-selection hide">
                        <div style="text-align:center;" class="col-xs-12">
                            <br>
                        <div class="btn-group">
                                <button type="button" id="drop-month" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Seleccione el mes <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="month"><a>Enero</a></li>
                                    <li class="month"><a>Febrero</a></li>
                                    <li class="month"><a>Marzo</a></li>
                                    <li class="month"><a>Abril</a></li>
                                    <li class="month"><a>Mayo</a></li>
                                    <li class="month"><a>Junio</a></li>
                                    <li class="month"><a>Julio</a></li>
                                    <li class="month"><a>Agosto</a></li>
                                    <li class="month"><a>Septiembre</a></li>
                                    <li class="month"><a>Octubre</a></li>
                                    <li class="month"><a>Noviembre</a></li>
                                    <li class="month"><a>Diciembre</a></li>
                                </ul>
                            </div>
                            <div class="container">    
                                <div class="row">
                                    <div class="col-sm-6 form-group">
                                        <div class="input-group" id="DateDemo">
                                          <input type="text" id="weekpicker" required="required" name="newsdate"/>
                                      </div>
                                  </div>
                              </div>
                            </div>
                        </div>
                    </div>
                    <div class="day-selection hide">
                        <div class="col-xs-12 ">
                            <div class="bootstrap-iso">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-sm-offset-3 col-sm-6 col-xs-12">
                                            <form>
                                                <div class="form-group">
                                                    <label class="control-label col-sm-2 requiredField" for="date">
                                                    Día</label>
                                                    <div class="col-sm-10">
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="glyphicon glyphicon-calendar"></i>
                                                            </div>
                                                            <input class="form-control" id="date" name="date" placeholder="MM/DD/YYYY" type="text"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div id="chartdiv"></div>
                </div>
            </div>
        </div>
        <br>
        </main>
        <!--Muestra si los dispositivos tienen bateria-->
        <div class="container">
            <div class="row">
                 <div class="col-xs-12">
                    <h2 class="center-block" style="width:240px; text-align:center;">Energía:</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-4">
                    <h4 style="text-align:center">LiSANDRA 1:</h4>
                    <span class="icon-flash center-block iconglobal full"></span>
                    <p class="fullp" id="status" style="text-align:center"></p>
                    <h6 class="update_button">Cambio Realizado</h6>
                </div>
                <div class="col-sm-12 col-md-4">
                    <h4 style="text-align:center">LiSANDRA 2:</h4>
                    <span class="icon-flash center-block iconglobal full"></span>
                    <p class="fullp" id="status" style="text-align:center"></p>
                    <h6 class="update_button">Cambio Realizado</h6>
                </div>
                <div class="col-sm-12 col-md-4">
                    <h4 style="text-align:center">LiSANDRA 3:</h4>
                    <span class="icon-flash center-block iconglobal empty"></span>
                    <p class="emptyp" id="status" style="text-align:center"></p>
                    <h6 class="update_button">Cambio Realizado</h6>
                </div>
            </div>
        </div>
        <br>
        <div class="panel panel-default" style="text-align:center;">
          <div class="panel-body">UABC LiSANDRA 2016</div>
          <div class="panel-footer">LiSANDRA Project</div>
        </div>  
        <!--Scripts-->
        <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/momentjs/2.10.6/moment.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/amcharts/amcharts.js"></script>
        <script src="js/amcharts/serial.js"></script>
        <script src="js/amcharts/amstock.js"></script>
        <script src="js/amcharts/plugins/export/export.min.js"></script>        
        <script src="js/amcharts/themes/light.js"></script>
	
		<script src="js/data_manage.js"></script>
		<script src="js/check_browser.js"></script>     
        <script src="js/line_chart_stock.js"></script>        
        <!-- Include Date Range Picker -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
        <!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
        <script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>      
        <script type="text/javascript">
            $(document).ready(function(){
                var date_input=$('input[name="date"]'); //our date input has the name "date"
		        var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
                var menuselection = document.getElementById("year");
                var startDate;
                var endDate;

                var selectCurrentWeek = function() {
                    window.setTimeout(function () {
                        $('#weekpicker').datepicker('widget').find('.ui-datepicker-current-day a').addClass('ui-state-active')
                    }, 1);
                }
                
                
                /*Funcion general para cambiar la clases de los botones a estado OK*/
                $('.update_button').on('click',function(){
                    $(this).prev().removeClass("emptyp").addClass("fullp");
                    $(this).prev().prev().removeClass("empty").addClass("full");
                })
                
                $('#weekpicker').datepicker( {
        showOtherMonths: false,
        selectOtherMonths: false,
        onSelect: function(dateText, inst) { 
            var date = $(this).datepicker('getDate');
            startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
            endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
            var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
            $('#weekpicker').val($.datepicker.formatDate( dateFormat, startDate, inst.settings )
                 + ' - ' + $.datepicker.formatDate( dateFormat, endDate, inst.settings ));
            
            selectCurrentWeek();
        },
        beforeShow: function() {
            selectCurrentWeek();
        },
        beforeShowDay: function(date) {
            var cssClass = '';
            if(date >= startDate && date <= endDate)
                cssClass = 'ui-datepicker-current-day';
            return [true, cssClass];
        },
        onChangeMonthYear: function(year, month, inst) {
            selectCurrentWeek();
        }
    }).datepicker('widget').addClass('ui-weekpicker');
    
                $('.ui-weekpicker .ui-datepicker-calendar tr').on('mousemove', function() { 
                    $(this).find('td a').addClass('ui-state-hover'); 
                });
                $('.ui-weekpicker .ui-datepicker-calendar tr').on('mouseleave', function() { 
                    $(this).find('td a').removeClass('ui-state-hover'); 
                });
                
                /*Funcion calendario*/
                date_input.datepicker({
                    format: 'mm/dd/yyyy',
                    container: container,
                    todayHighlight: true,
                    autoclose: true,
                })
                
                
                
                /*Funcion general para la seleccion del modo de visualizacion*/
                $(".menu-button").on('click',function(){
                    $(menuselection).removeClass("active");
                    $(this).addClass("active");
                    menuselection = this;
                })
                
                /*Fucniones para la seleccion de los dropdown buttons en año y mes*/
                $(".year").on('click',function(){
                    $("#drop-year").text($(this).text()).append(" <span class=\"caret\"></span>");
                });

                $(".month").on('click',function(){
                    $("#drop-month").text($(this).text()).append(" <span class=\"caret\"></span>");
                });
                
                /*Funcion para la seleccion en el menu principal(Año,Estacion,Mes,día)*/
                $("#year").on('click',function(){
                    $(".year-selection").removeClass("hide").addClass("show");
                    $(".season-selection").removeClass("show").addClass("hide");
                    $(".month-selection").removeClass("show").addClass("hide");
                    $(".day-selection").removeClass("show").addClass("hide");
                });
                
                $("#season").on('click',function(){
                    $(".season-selection").removeClass("hide").addClass("show");
                    $(".year-selection").removeClass("hide").addClass("show");
                    $(".month-selection").removeClass("show").addClass("hide");
                    $(".day-selection").removeClass("show").addClass("hide");
                });
                
                $("#month").on('click',function(){
                    $(".month-selection").removeClass("hide").addClass("show");
                    $(".year-selection").removeClass("hide").addClass("show");
                    $(".season-selection").removeClass("show").addClass("hide");
                    $(".day-selection").removeClass("show").addClass("hide");
                });
                
                $("#day").on('click',function(){
                    $(".day-selection").removeClass("hide").addClass("show");
                    $(".year-selection").removeClass("show").addClass("hide");
                    $(".month-selection").removeClass("show").addClass("hide");
                    $(".season-selection").removeClass("show").addClass("hide");
                });
            });
        </script>
	</body>
</html>
